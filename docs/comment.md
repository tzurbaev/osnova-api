# Комментарий к записи

[< К записи](entry.md) | [< К оглавлению](readme.md)

[Сервисная сущность](entities.md) **"Комментарий"** хранит в себе данные и 
предоставляет функциональность для работы с комментариями к записям.

## Доступные методы

### Геттеры

| Метод              | Возвращаемый тип  | Описание                                                     |
|--------------------|-------------------|--------------------------------------------------------------|
| getId              | integer           | Возвращает ID комментария                                    |
| getAuthor          | Author            | Возвращает объект автора комментария                         |
| getDate            | DateTimeImmutable | Возвращает дату публикации комментария                       |
| getText            | string            | Возвращает текст комментария                                 |
| getMedia           | array|Media[]     | Возвращает массив [медиа-элементов](media) комментария       |
| getSourceId        | integer           | Возвращает источник публикации комментария (веб, приложения) |
| getLevel           | integer           | Возвращает уровень вложенности комментария                   |
| getParentCommentId | integer           | Возвращает ID родительского комментария                      |
| isPinned           | boolean           | Определяет, является ли комментарий закреплённым             |
| isFavorited        | boolean           | Определяет, добавил ли пользователь комментарий в избранное  |
| isEdited           | boolean           | Определяет, был ли комментарий отредактирован                |

### Работа с API

Кроме базовых геттеров класс предоставляет возможность работать с API комментариев.

> Внимание: работа с API доступна только в том случае, если объект комментария
> был создан с передачей параметра `ApiProvider`!

> Всем объектам комментариев, созданным с помощью метода `Entry::getComments`,
> доступна такая возможность автоматически.

#### Получить список пользователей, поставивших оценку комментарию

Метод `Likes::getLikers()` возвращает массив объектов `Osnova\Services\Likes\Liker`.

```php
<?php

use Osnova\Api\ApiProvider;
use Osnova\Services\Comments\Comment;
use Osnova\Services\Likes\Likes;

/** @var Comment $comment */
$likes = new Likes(new ApiProvider());
$likers = $likes->getLikers($comment);

foreach ($likers as $liker) {
    echo 'User '.$liker->getName().' '.($liker->isLiked() ? 'up' : 'down').'voted'."\n";
}
```
